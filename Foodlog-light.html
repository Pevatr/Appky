<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>FoodLog Light</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@400;500&family=Syne:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #0f172a;
  --surface: #1e293b;
  --card: #1e293b;
  --card2: #273449;
  --border: #334155;
  --accent: #38bdf8;
  --accent2: #0ea5e9;
  --accent-dim: #0c2a3a;
  --green: #4ade80;
  --green2: #22c55e;
  --green-dim: #0d2a1a;
  --orange: #fb923c;
  --orange-dim: #2a1a0a;
  --warn: #fbbf24;
  --danger: #f87171;
  --muted: #64748b;
  --muted2: #94a3b8;
  --text: #f1f5f9;
  --mono: 'DM Mono', monospace;
  --sans: 'Syne', sans-serif;
  --radius: 16px;
  --nav-h: 72px;
}
* { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
html, body { height: 100%; }
body {
  font-family: var(--sans);
  background: #0a1020;
  color: var(--text);
  display: flex; justify-content: center;
}
.app {
  width: 100%; max-width: 460px;
  min-height: 100vh;
  background: var(--bg);
  position: relative;
  overflow-x: hidden;
}

/* â”€â”€ SCREENS â”€â”€ */
.screen { display: none; flex-direction: column; min-height: 100vh; padding-bottom: calc(var(--nav-h) + 24px); }
.screen.active { display: flex; }

/* â”€â”€ SHARED HEADER â”€â”€ */
.topbar {
  padding: 52px 20px 16px;
  display: flex; align-items: center; justify-content: space-between;
}
.topbar-left .greeting { font-size: 13px; color: var(--muted2); font-weight: 600; }
.topbar-left .tdate   { font-size: 18px; font-weight: 800; letter-spacing: -.5px; margin-top: 2px; }
.settings-btn {
  width: 40px; height: 40px; background: var(--card); border: 1px solid var(--border);
  border-radius: 12px; cursor: pointer; display: flex; align-items: center; justify-content: center;
  font-size: 18px; transition: border-color .15s;
}
.settings-btn:active { border-color: var(--accent); }
.screen-header {
  padding: 52px 20px 20px; display: flex; align-items: center; gap: 14px;
}
.back-btn {
  width: 38px; height: 38px; background: var(--card); border: 1px solid var(--border);
  border-radius: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center;
  font-size: 20px; line-height: 1; flex-shrink: 0; transition: border-color .15s;
}
.back-btn:active { border-color: var(--accent); }
.screen-title { font-size: 22px; font-weight: 800; letter-spacing: -.5px; }
.screen-body  { padding: 0 16px; flex: 1; }

/* â”€â”€ PROGRESS CARDS â”€â”€ */
.progress-section { padding: 0 16px 16px; display: flex; flex-direction: column; gap: 12px; }
.prog-card { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); padding: 18px 20px; }
.prog-card.water { border-color: #1a3a50; }
.prog-card.food  { border-color: #1a2e1a; }
.prog-label { font-size: 12px; font-weight: 700; color: var(--muted2); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 12px; }
.prog-values { display: flex; align-items: baseline; gap: 6px; margin-bottom: 12px; }
.prog-current { font-size: 32px; font-weight: 800; font-family: var(--mono); line-height: 1; }
.prog-current.wc { color: var(--accent); }
.prog-current.fc { color: var(--green); }
.prog-unit { font-size: 14px; color: var(--muted); }
.prog-goal { font-size: 13px; color: var(--muted); margin-left: auto; }
.prog-goal strong { color: var(--muted2); }
.track { height: 8px; background: var(--card2); border-radius: 8px; overflow: hidden; }
.fill { height: 100%; border-radius: 8px; transition: width .6s cubic-bezier(.4,0,.2,1); }
.fill.water  { background: linear-gradient(90deg,var(--accent2),var(--accent)); }
.fill.food   { background: linear-gradient(90deg,var(--green2),var(--green)); }
.fill.warn   { background: linear-gradient(90deg,var(--warn),#f59e0b); }
.fill.danger { background: linear-gradient(90deg,var(--danger),#ef4444); }
.prog-remain { font-size: 12px; margin-top: 8px; font-weight: 600; color: var(--muted); }
.prog-remain.ok      { color: var(--accent); }
.prog-remain.food-ok { color: var(--green); }
.prog-remain.over    { color: var(--danger); }

/* â”€â”€ CONSUMPTION SUMMARY â”€â”€ */
.consump-line {
  margin: -4px 16px 14px;
  display: flex; align-items: center; gap: 8px;
  padding: 10px 16px;
  background: transparent;
  border-top: 1px solid var(--border);
}
.consump-icon { font-size: 14px; opacity: .6; }
.consump-text { font-size: 12px; color: var(--muted); font-family: var(--mono); }
.consump-text strong { color: var(--muted2); font-weight: 500; }

/* â”€â”€ TODAY LIST â”€â”€ */
.today-list { padding: 0 16px; display: flex; flex-direction: column; gap: 8px; margin-top: 4px; }

/* â”€â”€ SBALITELNÃ‰ SEKCE â”€â”€ */
.tl-section {
  display: flex; flex-direction: column; gap: 8px;
}
.tl-section-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 9px 14px; background: var(--card2); border: 1px solid var(--border);
  border-radius: 12px; cursor: pointer; user-select: none;
  transition: border-color .15s, background .15s;
}
.tl-section-header:active { border-color: var(--accent); }
.tl-section-left { display: flex; align-items: center; gap: 8px; }
.tl-section-label {
  font-size: 12px; font-weight: 700; color: var(--muted2); text-transform: uppercase;
  letter-spacing: 1px;
}
.tl-section-count {
  font-size: 11px; color: var(--muted); font-family: var(--mono);
  background: var(--card); border-radius: 6px; padding: 2px 7px;
}
.tl-section-arrow {
  font-size: 12px; color: var(--muted); transition: transform .25s ease;
}
.tl-section.collapsed .tl-section-arrow { transform: rotate(-90deg); }
.tl-section-body {
  display: flex; flex-direction: column; gap: 8px;
  overflow: hidden;
  transition: max-height .3s ease, opacity .25s ease;
  max-height: 2000px; opacity: 1;
}
.tl-section.collapsed .tl-section-body { max-height: 0; opacity: 0; pointer-events: none; }
.tl-item {
  background: var(--card); border: 1px solid var(--border);
  border-radius: 12px; padding: 13px 14px;
  display: flex; align-items: center; gap: 10px;
  cursor: pointer; transition: border-color .15s;
  -webkit-user-select: none; user-select: none;
}
.tl-item:active { border-color: var(--accent); background: var(--card2); }
.tl-icon   { font-size: 20px; flex-shrink: 0; }
.tl-info   { flex: 1; min-width: 0; }
.tl-name   { font-size: 14px; font-weight: 700; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.tl-detail { font-size: 11px; color: var(--muted2); margin-top: 2px; font-family: var(--mono); }
.tl-time   { font-size: 11px; color: var(--muted); font-family: var(--mono); flex-shrink: 0; }
.tl-del    { font-size: 18px; flex-shrink: 0; padding: 4px; opacity: .5; transition: opacity .15s; }
.tl-del:active { opacity: 1; }
.tl-empty  { text-align: center; padding: 40px 20px; color: var(--muted); font-size: 14px; }
.tl-empty-icon { font-size: 40px; margin-bottom: 12px; display: block; }

/* â”€â”€ EDIT MODAL â”€â”€ */
.edit-modal {
  width: 100%; max-width: 460px;
  background: var(--surface); border: 1px solid var(--border);
  border-radius: 24px 24px 0 0; padding: 24px 20px 48px;
  animation: slideUp .25s ease;
}
.edit-modal-btns { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 20px; }
.btn-save-green { padding: 14px; border-radius: 12px; border: none; background: var(--green2); color: #0f172a; font-family: var(--sans); font-size: 14px; font-weight: 800; cursor: pointer; }

/* â”€â”€ HIST DAY DELETE â”€â”€ */
.hdc-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px; }
.hdc-del-btn {
  font-size: 15px; opacity: .4; cursor: pointer; padding: 4px 6px;
  border-radius: 8px; transition: opacity .15s, background .15s;
}
.hdc-del-btn:active { opacity: 1; background: rgba(248,113,113,.15); }

/* â”€â”€ GRID BUTTONS â”€â”€ */
.grid-label {
  font-size: 11px; font-weight: 700; color: var(--muted); text-transform: uppercase;
  letter-spacing: 1px; margin-bottom: 10px; padding-left: 2px;
}
.btn-grid { display: grid; grid-template-columns: repeat(4,1fr); gap: 10px; margin-bottom: 20px; }
.grid-btn {
  background: var(--card); border: 2px solid var(--border);
  border-radius: 14px; padding: 13px 6px; cursor: pointer;
  transition: all .15s; text-align: center;
  display: flex; flex-direction: column; align-items: center; gap: 5px;
  font-family: var(--sans);
}
.grid-btn:active { transform: scale(.93); }
.grid-btn.sel-vol  { background: var(--accent-dim); border-color: var(--accent); }
.grid-btn.sel-typ  { background: var(--green-dim);  border-color: var(--green); }
.grid-btn.sel-wgt  { background: var(--accent-dim); border-color: var(--accent); }
.grid-btn.sel-ftyp { background: var(--orange-dim); border-color: var(--orange); }
.gb-icon  { font-size: 20px; }
.gb-label { font-size: 11px; font-weight: 700; color: var(--muted2); line-height: 1.2; }
.gb-sub   { font-size: 10px; color: var(--muted); font-family: var(--mono); }

/* â”€â”€ CUSTOM INPUTS â”€â”€ */
.custom-panel {
  background: var(--card); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 16px; margin-bottom: 16px;
  display: none; flex-direction: column; gap: 12px;
}
.custom-panel.show { display: flex; }
.input-group { display: flex; flex-direction: column; gap: 6px; }
.input-label { font-size: 11px; font-weight: 700; color: var(--muted2); text-transform: uppercase; letter-spacing: .5px; }
.inp {
  background: var(--card2); border: 1px solid var(--border);
  border-radius: 10px; padding: 10px 14px; color: var(--text);
  font-family: var(--mono); font-size: 15px; width: 100%;
  outline: none; transition: border-color .15s;
}
.inp:focus { border-color: var(--accent); }
input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
input[type=number] { -moz-appearance: textfield; appearance: textfield; }
.inp-row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }

/* â”€â”€ NAME ROW (jÃ­dlo - vÅ¾dy viditelnÃ©) â”€â”€ */
.name-row { margin-bottom: 16px; }

/* â”€â”€ PREVIEW â”€â”€ */
.preview-box {
  background: var(--card2); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 15px 18px; margin-bottom: 14px;
  display: flex; align-items: center; justify-content: space-between;
  transition: opacity .2s;
}
.preview-box.hidden { opacity: .2; pointer-events: none; }
.prev-main   { font-size: 15px; font-weight: 800; }
.prev-detail { font-size: 11px; color: var(--muted2); margin-top: 3px; font-family: var(--mono); }
.prev-kcal   { font-size: 22px; font-weight: 800; font-family: var(--mono); white-space: nowrap; }
.prev-kcal.wc { color: var(--green); }
.prev-kcal.fc { color: var(--orange); }
.prev-kcal span { font-size: 11px; color: var(--muted); font-weight: 400; }

.add-btn {
  width: 100%; padding: 17px; border-radius: var(--radius);
  background: linear-gradient(135deg,var(--accent2),var(--accent));
  border: none; color: #0f172a; font-family: var(--sans);
  font-size: 16px; font-weight: 800; cursor: pointer;
  transition: all .2s; letter-spacing: .3px; margin-bottom: 12px;
}
.add-btn.food-btn-color { background: linear-gradient(135deg,var(--green2),var(--green)); }
.add-btn:active  { transform: scale(.98); }
.add-btn:disabled { opacity: .3; cursor: default; transform: none; }

.kal-link {
  display: block; text-align: center; font-size: 12px; color: var(--muted);
  text-decoration: none; padding: 8px;
  transition: color .15s;
}
.kal-link:hover { color: var(--accent); }

/* â”€â”€ HISTORIE â”€â”€ */
.hist-header { padding: 52px 20px 16px; }
.hist-title  { font-size: 22px; font-weight: 800; letter-spacing: -.5px; }
.hist-sub    { font-size: 12px; color: var(--muted); margin-top: 2px; }
.hist-list   { padding: 0 16px; display: flex; flex-direction: column; gap: 8px; }
.hist-day-card {
  background: var(--card); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 16px 18px;
}
.hdc-date  { font-size: 13px; font-weight: 800; color: var(--muted2); margin-bottom: 10px; }
.hdc-row   { display: flex; gap: 10px; }
.hdc-pill  {
  flex: 1; background: var(--card2); border-radius: 10px;
  padding: 10px 12px; display: flex; flex-direction: column; gap: 2px;
}
.hdc-val   { font-size: 16px; font-weight: 800; font-family: var(--mono); }
.hdc-val.wc { color: var(--accent); }
.hdc-val.fc { color: var(--green); }
.hdc-lbl   { font-size: 10px; color: var(--muted); font-weight: 600; text-transform: uppercase; letter-spacing: .5px; }
.hist-empty { text-align: center; padding: 48px 20px; color: var(--muted); font-size: 14px; }

/* â”€â”€ BOTTOM NAV â”€â”€ */
.bottom-nav {
  position: fixed; bottom: 0; left: 50%; transform: translateX(-50%);
  width: 100%; max-width: 460px; height: var(--nav-h);
  background: var(--surface); border-top: 1px solid var(--border);
  display: flex; align-items: center; padding: 0 4px 8px; z-index: 100;
}
.nav-btn {
  flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center;
  gap: 4px; padding: 8px 4px; border-radius: 12px; cursor: pointer;
  background: none; border: none; font-family: var(--sans); transition: all .15s;
}
.nav-icon  { font-size: 22px; }
.nav-label { font-size: 10px; font-weight: 700; color: var(--muted); text-transform: uppercase; letter-spacing: .5px; }
.nav-btn.active .nav-label { color: var(--accent); }

/* â”€â”€ MODALS â”€â”€ */
.modal-overlay {
  position: fixed; inset: 0; background: rgba(0,0,0,.75);
  display: none; align-items: flex-end; justify-content: center;
  z-index: 200; backdrop-filter: blur(4px);
}
.modal-overlay.show { display: flex; }
.modal {
  width: 100%; max-width: 460px;
  background: var(--surface); border: 1px solid var(--border);
  border-radius: 24px 24px 0 0; padding: 24px 20px 48px;
  animation: slideUp .25s ease;
}
@keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
.modal-handle { width: 40px; height: 4px; background: var(--border); border-radius: 4px; margin: 0 auto 20px; }
.modal-title  { font-size: 18px; font-weight: 800; margin-bottom: 20px; }
.setting-group { margin-bottom: 14px; }
.setting-label { font-size: 11px; font-weight: 700; color: var(--muted2); text-transform: uppercase; letter-spacing: .5px; margin-bottom: 6px; }
.modal-btns { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 24px; }
.btn-cancel { padding: 14px; border-radius: 12px; border: 1px solid var(--border); background: var(--card); color: var(--muted2); font-family: var(--sans); font-size: 14px; font-weight: 700; cursor: pointer; }
.btn-save   { padding: 14px; border-radius: 12px; border: none; background: var(--accent); color: #0f172a; font-family: var(--sans); font-size: 14px; font-weight: 800; cursor: pointer; }

/* â”€â”€ CONFIRM â”€â”€ */
.confirm-overlay {
  position: fixed; inset: 0; background: rgba(0,0,0,.8);
  display: none; align-items: center; justify-content: center;
  z-index: 300; padding: 20px; backdrop-filter: blur(4px);
}
.confirm-overlay.show { display: flex; }
.confirm-box {
  background: var(--surface); border: 1px solid var(--border);
  border-radius: 20px; padding: 28px 24px; width: 100%; max-width: 320px;
  animation: popIn .2s ease;
}
@keyframes popIn { from { transform: scale(.9); opacity:0; } to { transform: scale(1); opacity:1; } }
.confirm-icon { font-size: 36px; text-align: center; margin-bottom: 12px; }
.confirm-text { font-size: 17px; font-weight: 800; text-align: center; margin-bottom: 6px; }
.confirm-sub  { font-size: 13px; color: var(--muted2); text-align: center; margin-bottom: 24px; line-height: 1.5; }
.confirm-btns { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.btn-no  { padding: 14px; border-radius: 12px; border: 1px solid var(--border); background: var(--card); color: var(--muted2); font-family: var(--sans); font-size: 14px; font-weight: 700; cursor: pointer; }
.btn-yes { padding: 14px; border-radius: 12px; border: none; background: var(--danger); color: #fff; font-family: var(--sans); font-size: 14px; font-weight: 800; cursor: pointer; }

/* â”€â”€ OBLÃBENÃ JÃDLA â”€â”€ */
.fav-section { margin-bottom: 18px; }
.fav-section-header {
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 10px; cursor: pointer; user-select: none; padding: 2px 0;
}
.fav-section-header .grid-label { margin-bottom: 0; cursor: pointer; }
.fav-section-arrow {
  font-size: 12px; color: var(--muted); transition: transform .25s ease;
}
.fav-section.collapsed .fav-section-arrow { transform: rotate(-90deg); }
.fav-section-body {
  overflow: hidden;
  transition: max-height .3s ease, opacity .25s ease;
  max-height: 300px; opacity: 1;
}
.fav-section.collapsed .fav-section-body { max-height: 0; opacity: 0; pointer-events: none; }
.fav-scroll {
  display: flex; gap: 10px; overflow-x: auto; padding-bottom: 4px;
  scrollbar-width: none;
}
.fav-scroll::-webkit-scrollbar { display: none; }
.fav-card {
  background: var(--card); border: 1px solid var(--border);
  border-radius: 14px; padding: 11px 13px; flex-shrink: 0;
  min-width: 110px; max-width: 130px; cursor: pointer;
  transition: border-color .15s, background .15s;
  position: relative;
}
.fav-card:active { border-color: var(--green); background: var(--green-dim); }
.fav-card-icon  { font-size: 22px; margin-bottom: 5px; }
.fav-card-name  { font-size: 12px; font-weight: 700; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.fav-card-detail{ font-size: 10px; color: var(--muted); font-family: var(--mono); margin-top: 2px; }
.fav-card-actions { display: flex; gap: 4px; margin-top: 7px; }
.fav-act-btn {
  flex: 1; font-size: 11px; padding: 4px 2px; text-align: center;
  background: var(--card2); border-radius: 7px; cursor: pointer;
  border: none; color: var(--muted2); font-family: var(--sans); font-weight: 700;
  transition: background .15s;
}
.fav-act-btn:active { background: var(--border); }
.fav-empty { font-size: 12px; color: var(--muted); padding: 10px 2px; font-style: italic; }

/* save-fav btn */
.btn-save-fav {
  width: 100%; padding: 12px; border-radius: 12px;
  background: var(--card); border: 1px dashed var(--border);
  color: var(--muted2); font-family: var(--sans); font-size: 13px; font-weight: 700;
  cursor: pointer; transition: all .15s; margin-bottom: 12px;
}
.btn-save-fav:not(:disabled):active { border-color: var(--warn); color: var(--warn); background: #2a2200; }
.btn-save-fav:disabled { opacity: .3; cursor: default; }

/* â”€â”€ ICON PICKER â”€â”€ */
.icon-picker-grid {
  display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; margin-bottom: 16px;
}
.icon-pick-btn {
  font-size: 24px; padding: 10px; border-radius: 10px;
  background: var(--card2); border: 2px solid transparent;
  cursor: pointer; text-align: center; transition: all .15s;
}
.icon-pick-btn.picked { border-color: var(--green); background: var(--green-dim); }
.icon-pick-btn:active { transform: scale(.9); }

/* â”€â”€ KCAL KALKULAÄŒKA â”€â”€ */
.kcal-calc {
  background: var(--card); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 14px 16px; margin-bottom: 14px;
}
.kcal-calc-title { font-size: 11px; font-weight: 700; color: var(--muted2); text-transform: uppercase; letter-spacing: .5px; margin-bottom: 10px; }
.kcal-calc-row { display: grid; grid-template-columns: 1fr auto 1fr; align-items: center; gap: 8px; margin-bottom: 10px; }
.kcal-calc-sep { font-size: 11px; color: var(--muted); text-align: center; font-family: var(--mono); }
.kcal-calc-result {
  display: flex; align-items: center; justify-content: space-between;
  background: var(--card2); border-radius: 10px; padding: 10px 14px;
  min-height: 42px;
}
.kcal-calc-val { font-size: 18px; font-weight: 800; font-family: var(--mono); color: var(--orange); }
.kcal-calc-val span { font-size: 11px; color: var(--muted); font-weight: 400; margin-left: 3px; }
.kcal-calc-use {
  font-size: 12px; font-weight: 700; padding: 7px 12px;
  background: var(--orange-dim); border: 1px solid var(--orange); color: var(--orange);
  border-radius: 8px; cursor: pointer; font-family: var(--sans);
  transition: all .15s;
}
.kcal-calc-use:disabled { opacity: .3; cursor: default; }
.kcal-calc-use:not(:disabled):active { background: var(--orange); color: #0f172a; }

/* â”€â”€ TOAST â”€â”€ */
.toast-wrap { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); z-index: 400; pointer-events: none; display: flex; flex-direction: column; gap: 8px; align-items: center; }
.toast {
  background: var(--card2); border: 1px solid var(--border);
  border-radius: 24px; padding: 10px 20px;
  font-size: 13px; font-weight: 700; color: var(--text);
  white-space: nowrap; box-shadow: 0 8px 24px rgba(0,0,0,.5);
  animation: tIn .3s ease;
}
.toast.out { animation: tOut .3s ease forwards; }
@keyframes tIn  { from { opacity:0; transform:translateY(-10px) scale(.95); } to { opacity:1; transform:none; } }
@keyframes tOut { from { opacity:1; } to { opacity:0; transform:translateY(-8px); } }
</style>
</head>
<body>
<div class="app">

<!-- â•â•â•â•â•â•â•â•â•â•â•â• DNES â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen active" id="screen-dnes">
  <div class="topbar">
    <div class="topbar-left">
      <div class="greeting" id="greeting">DobrÃ½ den</div>
      <div class="tdate" id="today-date">â€“</div>
    </div>
    <button class="settings-btn" onclick="openSettings()">âš™ï¸</button>
  </div>

  <div class="progress-section">
    <div class="prog-card water">
      <div class="prog-label">ğŸ’§ Tekutiny dnes</div>
      <div class="prog-values">
        <div class="prog-current wc" id="d-water">0</div>
        <div class="prog-unit">ml</div>
        <div class="prog-goal">z <strong id="d-water-goal">2000</strong> ml</div>
      </div>
      <div class="track"><div class="fill water" id="d-water-fill" style="width:0%"></div></div>
      <div class="prog-remain" id="d-water-rem"></div>
    </div>
    <div class="prog-card food">
      <div class="prog-label">ğŸ”¥ Kalorie dnes</div>
      <div class="prog-values">
        <div class="prog-current fc" id="d-kcal">0</div>
        <div class="prog-unit">kcal</div>
        <div class="prog-goal">z <strong id="d-kcal-goal">2500</strong> kcal</div>
      </div>
      <div class="track"><div class="fill food" id="d-kcal-fill" style="width:0%"></div></div>
      <div class="prog-remain" id="d-kcal-rem"></div>
    </div>
  </div>

  <div class="consump-line" id="consump-line">
    <span class="consump-icon">âš–ï¸</span>
    <span class="consump-text" id="consump-text">Celkem zkonzumovÃ¡no: <strong>0 g</strong></span>
  </div>

  <div class="today-list" id="today-list"></div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â• PITÃ â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen" id="screen-piti">
  <div class="screen-header">
    <button class="back-btn" onclick="goTo('dnes')">â†</button>
    <div class="screen-title">ğŸ’§ PÅ™idat pitÃ­</div>
  </div>
  <div class="screen-body">

    <div class="grid-label">Objem</div>
    <div class="btn-grid" id="vol-grid">
      <div class="grid-btn" onclick="selVol(this,250)">
        <div class="gb-icon">ğŸ¥›</div>
        <div class="gb-label">Sklenka</div>
        <div class="gb-sub">250 ml</div>
      </div>
      <div class="grid-btn" onclick="selVol(this,500)">
        <div class="gb-icon">ğŸ¶</div>
        <div class="gb-label">LÃ¡hev</div>
        <div class="gb-sub">500 ml</div>
      </div>
      <div class="grid-btn" onclick="selVol(this,1000)">
        <div class="gb-icon">ğŸ«™</div>
        <div class="gb-label">VelkÃ¡</div>
        <div class="gb-sub">1 000 ml</div>
      </div>
      <div class="grid-btn" onclick="selVol(this,'custom')">
        <div class="gb-icon">âœï¸</div>
        <div class="gb-label">JinÃ©</div>
        <div class="gb-sub">vlastnÃ­</div>
      </div>
    </div>

    <div class="grid-label">Typ nÃ¡poje</div>
    <div class="btn-grid" id="typ-grid">
      <div class="grid-btn" data-n="Voda"      data-k="0"  data-i="ğŸ’§" onclick="selTyp(this)">
        <div class="gb-icon">ğŸ’§</div>
        <div class="gb-label">Voda</div>
        <div class="gb-sub">0 kcal</div>
      </div>
      <div class="grid-btn" data-n="MinerÃ¡lka" data-k="0"  data-i="ğŸ«§" onclick="selTyp(this)">
        <div class="gb-icon">ğŸ«§</div>
        <div class="gb-label">MinerÃ¡lka</div>
        <div class="gb-sub">0 kcal</div>
      </div>
      <div class="grid-btn" data-n="Cola"      data-k="42" data-i="ğŸ¥¤" onclick="selTyp(this)">
        <div class="gb-icon">ğŸ¥¤</div>
        <div class="gb-label">Cola</div>
        <div class="gb-sub">42/100ml</div>
      </div>
      <div class="grid-btn" data-n="__custom" data-k="custom" data-i="âœï¸" onclick="selTyp(this)">
        <div class="gb-icon">âœï¸</div>
        <div class="gb-label">JinÃ©</div>
        <div class="gb-sub">vlastnÃ­</div>
      </div>
    </div>

    <div class="custom-panel" id="drink-custom">
      <div id="d-vol-wrap" style="display:none">
        <div class="input-group">
          <div class="input-label">Objem (ml)</div>
          <input class="inp" type="number" id="d-inp-vol" placeholder="350" oninput="updDrinkPreview()">
        </div>
      </div>
      <div id="d-typ-wrap" style="display:none">
        <div class="inp-row">
          <div class="input-group">
            <div class="input-label">NÃ¡zev</div>
            <input class="inp" type="text" id="d-inp-name" placeholder="DÅ¾usâ€¦" oninput="updDrinkPreview()">
          </div>
          <div class="input-group">
            <div class="input-label">Kcal/100ml</div>
            <input class="inp" type="number" id="d-inp-k100" placeholder="45" oninput="updDrinkPreview()">
          </div>
        </div>
      </div>
    </div>

    <div class="preview-box hidden" id="drink-preview">
      <div>
        <div class="prev-main"   id="dp-main">â€“</div>
        <div class="prev-detail" id="dp-detail">â€“</div>
      </div>
      <div class="prev-kcal wc" id="dp-kcal">â€“ <span>kcal</span></div>
    </div>

    <button class="add-btn" id="drink-add-btn" onclick="addDrink()" disabled>PÅ™idat</button>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â• JÃDLO â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen" id="screen-jidlo">
  <div class="screen-header">
    <button class="back-btn" onclick="goTo('dnes')">â†</button>
    <div class="screen-title">ğŸ½ï¸ PÅ™idat jÃ­dlo</div>
  </div>
  <div class="screen-body">

    <!-- â”€â”€ OBLÃBENÃ JÃDLA â”€â”€ -->
    <div class="fav-section collapsed" id="fav-section">
      <div class="fav-section-header" onclick="toggleFavSection()">
        <div class="grid-label">â­ OblÃ­benÃ¡ jÃ­dla</div>
        <span class="fav-section-arrow">â–¼</span>
      </div>
      <div class="fav-section-body">
        <div class="fav-scroll" id="fav-scroll"></div>
      </div>
    </div>

    <!-- NÃ¡zev vÅ¾dy viditelnÃ½ -->
    <div class="name-row">
      <div class="grid-label">NÃ¡zev jÃ­dla</div>
      <input class="inp" type="text" id="f-inp-name" placeholder="KuÅ™ecÃ­ salÃ¡tâ€¦" oninput="updFoodPreview()">
    </div>

    <div class="grid-label">VÃ¡ha</div>
    <div class="btn-grid" id="wgt-grid">
      <div class="grid-btn" onclick="selWgt(this,10)">
        <div class="gb-icon">ğŸ«˜</div>
        <div class="gb-label">MalÃ¡</div>
        <div class="gb-sub">10 g</div>
      </div>
      <div class="grid-btn" onclick="selWgt(this,100)">
        <div class="gb-icon">ğŸ±</div>
        <div class="gb-label">StÅ™ednÃ­</div>
        <div class="gb-sub">100 g</div>
      </div>
      <div class="grid-btn" onclick="selWgt(this,250)">
        <div class="gb-icon">ğŸ¥˜</div>
        <div class="gb-label">VelkÃ¡</div>
        <div class="gb-sub">250 g</div>
      </div>
      <div class="grid-btn" onclick="selWgt(this,'custom')">
        <div class="gb-icon">âœï¸</div>
        <div class="gb-label">JinÃ©</div>
        <div class="gb-sub">vlastnÃ­</div>
      </div>
    </div>

    <div class="grid-label">Kalorie (celkem)</div>
    <div class="btn-grid" id="ftyp-grid">
      <div class="grid-btn" data-k="150" data-i="ğŸ¥—" onclick="selFtyp(this)">
        <div class="gb-icon">ğŸ¥—</div>
        <div class="gb-label">LehkÃ©</div>
        <div class="gb-sub">150 kcal</div>
      </div>
      <div class="grid-btn" data-k="350" data-i="ğŸš" onclick="selFtyp(this)">
        <div class="gb-icon">ğŸš</div>
        <div class="gb-label">BÄ›Å¾nÃ©</div>
        <div class="gb-sub">350 kcal</div>
      </div>
      <div class="grid-btn" data-k="600" data-i="ğŸ”" onclick="selFtyp(this)">
        <div class="gb-icon">ğŸ”</div>
        <div class="gb-label">VydatnÃ©</div>
        <div class="gb-sub">600 kcal</div>
      </div>
      <div class="grid-btn" data-k="custom" data-i="âœï¸" onclick="selFtyp(this)">
        <div class="gb-icon">âœï¸</div>
        <div class="gb-label">JinÃ©</div>
        <div class="gb-sub">vlastnÃ­</div>
      </div>
    </div>

    <div class="custom-panel" id="food-custom">
      <div id="f-wgt-wrap" style="display:none">
        <div class="input-group">
          <div class="input-label">VÃ¡ha (g)</div>
          <input class="inp" type="number" id="f-inp-wgt" placeholder="150" oninput="updFoodPreview()">
        </div>
      </div>
      <div id="f-ftyp-wrap" style="display:none">
        <div class="input-group">
          <div class="input-label">Kalorie (kcal)</div>
          <input class="inp" type="number" id="f-inp-k100" placeholder="280" oninput="updFoodPreview()">
        </div>
      </div>
    </div>

    <div class="preview-box hidden" id="food-preview">
      <div>
        <div class="prev-main"   id="fp-main">â€“</div>
        <div class="prev-detail" id="fp-detail">â€“</div>
      </div>
      <div class="prev-kcal fc" id="fp-kcal">â€“ <span>kcal</span></div>
    </div>

    <!-- â”€â”€ KCAL KALKULAÄŒKA â”€â”€ -->
    <div class="kcal-calc">
      <div class="kcal-calc-title">ğŸ§® KalkulaÄka kaloriÃ­</div>
      <div class="kcal-calc-row">
        <div class="input-group">
          <div class="input-label">100 g =</div>
          <input class="inp" type="number" id="calc-per100" placeholder="230" oninput="updCalc()">
        </div>
        <div class="kcal-calc-sep">â†’</div>
        <div class="input-group">
          <div class="input-label">VÃ¡ha (g)</div>
          <input class="inp" type="number" id="calc-weight" placeholder="125" oninput="updCalc()">
        </div>
      </div>
      <div class="kcal-calc-result">
        <div class="kcal-calc-val" id="calc-result">â€“ <span>kcal</span></div>
        <button class="kcal-calc-use" id="calc-use-btn" onclick="useCalcResult()" disabled>PouÅ¾Ã­t â†‘</button>
      </div>
    </div>

    <button class="btn-save-fav" id="btn-save-fav" onclick="openSaveFav()" disabled>â­ UloÅ¾it jako oblÃ­benÃ©</button>

    <button class="add-btn food-btn-color" id="food-add-btn" onclick="addFood()" disabled>PÅ™idat</button>
    <a class="kal-link" href="https://www.kaloricketabulky.cz/" target="_blank" rel="noopener">
      ğŸ” Vyhledat kalorie na kaloricketabulky.cz â†—
    </a>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â• HISTORIE â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen" id="screen-hist">
  <div class="hist-header">
    <div class="hist-title">ğŸ“‹ Historie</div>
    <div class="hist-sub">PÅ™ehled minulÃ½ch dnÃ­</div>
  </div>
  <div class="hist-list" id="hist-list"></div>
</div>

<!-- â”€â”€ BOTTOM NAV â”€â”€ -->
<nav class="bottom-nav">
  <button class="nav-btn active" id="nav-dnes"  onclick="goTo('dnes')">
    <span class="nav-icon">ğŸ </span>
    <span class="nav-label">Dnes</span>
  </button>
  <button class="nav-btn" id="nav-piti" onclick="goTo('piti')">
    <span class="nav-icon">ğŸ’§</span>
    <span class="nav-label">PitÃ­</span>
  </button>
  <button class="nav-btn" id="nav-jidlo" onclick="goTo('jidlo')">
    <span class="nav-icon">ğŸ½ï¸</span>
    <span class="nav-label">JÃ­dlo</span>
  </button>
  <button class="nav-btn" id="nav-hist" onclick="goTo('hist')">
    <span class="nav-icon">ğŸ“‹</span>
    <span class="nav-label">Historie</span>
  </button>
</nav>
</div><!-- .app -->

<!-- â”€â”€ SAVE FAV MODAL â”€â”€ -->
<div class="modal-overlay" id="savefav-modal" onclick="if(event.target===this)closeSaveFav()">
  <div class="modal">
    <div class="modal-handle"></div>
    <div class="modal-title">â­ UloÅ¾it oblÃ­benÃ© jÃ­dlo</div>
    <div class="setting-group">
      <div class="setting-label">NÃ¡zev</div>
      <input class="inp" type="text" id="sf-name" placeholder="KuÅ™ecÃ­ salÃ¡tâ€¦">
    </div>
    <div class="setting-group">
      <div class="setting-label">Vyber ikonu</div>
      <div class="icon-picker-grid" id="sf-icon-grid">
        <button class="icon-pick-btn" onclick="pickIcon(this,'ğŸŒ')">ğŸŒ</button>
        <button class="icon-pick-btn" onclick="pickIcon(this,'ğŸ¥')">ğŸ¥</button>
        <button class="icon-pick-btn" onclick="pickIcon(this,'ğŸ³')">ğŸ³</button>
        <button class="icon-pick-btn" onclick="pickIcon(this,'ğŸ¥“')">ğŸ¥“</button>
        <button class="icon-pick-btn" onclick="pickIcon(this,'ğŸ¥©')">ğŸ¥©</button>
        <button class="icon-pick-btn" onclick="pickIcon(this,'ğŸ§€')">ğŸ§€</button>
        <button class="icon-pick-btn" onclick="pickIcon(this,'ğŸ¥£')">ğŸ¥£</button>
        <button class="icon-pick-btn" onclick="pickIcon(this,'ğŸ½ï¸')">ğŸ½ï¸</button>
        <button class="icon-pick-btn" onclick="pickIcon(this,'ğŸ¥—')">ğŸ¥—</button>
        <button class="icon-pick-btn" onclick="pickIcon(this,'ğŸ«')">ğŸ«</button>
      </div>
    </div>
    <div class="modal-btns">
      <button class="btn-cancel" onclick="closeSaveFav()">ZruÅ¡it</button>
      <button class="btn-save" onclick="confirmSaveFav()">UloÅ¾it â­</button>
    </div>
  </div>
</div>

<!-- â”€â”€ EDIT FAV MODAL â”€â”€ -->
<div class="modal-overlay" id="editfav-modal" onclick="if(event.target===this)closeEditFav()">
  <div class="modal">
    <div class="modal-handle"></div>
    <div class="modal-title">âœï¸ Upravit oblÃ­benÃ©</div>
    <div class="setting-group">
      <div class="setting-label">NÃ¡zev</div>
      <input class="inp" type="text" id="ef-name" placeholder="NÃ¡zevâ€¦">
    </div>
    <div class="setting-group">
      <div class="setting-label">VÃ¡ha (g)</div>
      <input class="inp" type="number" id="ef-wgt" placeholder="100">
    </div>
    <div class="setting-group">
      <div class="setting-label">Kalorie (kcal)</div>
      <input class="inp" type="number" id="ef-kcal" placeholder="350">
    </div>
    <div class="setting-group">
      <div class="setting-label">Ikona</div>
      <div class="icon-picker-grid" id="ef-icon-grid">
        <button class="icon-pick-btn" onclick="pickIconEf(this,'ğŸŒ')">ğŸŒ</button>
        <button class="icon-pick-btn" onclick="pickIconEf(this,'ğŸ¥')">ğŸ¥</button>
        <button class="icon-pick-btn" onclick="pickIconEf(this,'ğŸ³')">ğŸ³</button>
        <button class="icon-pick-btn" onclick="pickIconEf(this,'ğŸ¥“')">ğŸ¥“</button>
        <button class="icon-pick-btn" onclick="pickIconEf(this,'ğŸ¥©')">ğŸ¥©</button>
        <button class="icon-pick-btn" onclick="pickIconEf(this,'ğŸ§€')">ğŸ§€</button>
        <button class="icon-pick-btn" onclick="pickIconEf(this,'ğŸ¥£')">ğŸ¥£</button>
        <button class="icon-pick-btn" onclick="pickIconEf(this,'ğŸ½ï¸')">ğŸ½ï¸</button>
        <button class="icon-pick-btn" onclick="pickIconEf(this,'ğŸ¥—')">ğŸ¥—</button>
        <button class="icon-pick-btn" onclick="pickIconEf(this,'ğŸ«')">ğŸ«</button>
      </div>
    </div>
    <div class="modal-btns">
      <button class="btn-cancel" onclick="closeEditFav()">ZruÅ¡it</button>
      <button class="btn-save-green" onclick="confirmEditFav()">UloÅ¾it</button>
    </div>
  </div>
</div>

<!-- â”€â”€ EDIT MODAL â”€â”€ -->
<div class="modal-overlay" id="edit-modal" onclick="if(event.target===this)closeEdit()">
  <div class="edit-modal">
    <div class="modal-handle"></div>
    <div class="modal-title" id="edit-title">âœï¸ Upravit zÃ¡znam</div>
    <div id="edit-drink-fields">
      <div class="setting-group">
        <div class="setting-label">NÃ¡zev</div>
        <input class="inp" type="text" id="edit-name" placeholder="NÃ¡zevâ€¦">
      </div>
      <div class="setting-group" id="edit-vol-group">
        <div class="setting-label">Objem (ml)</div>
        <input class="inp" type="number" id="edit-vol" placeholder="500">
      </div>
      <div class="setting-group" id="edit-wgt-group" style="display:none">
        <div class="setting-label">VÃ¡ha (g)</div>
        <input class="inp" type="number" id="edit-wgt" placeholder="100">
      </div>
      <div class="setting-group">
        <div class="setting-label">Kalorie (kcal)</div>
        <input class="inp" type="number" id="edit-kcal" placeholder="0">
      </div>
    </div>
    <div class="edit-modal-btns">
      <button class="btn-cancel" onclick="closeEdit()">ZruÅ¡it</button>
      <button class="btn-save-green" onclick="saveEdit()">UloÅ¾it</button>
    </div>
  </div>
</div>

<!-- â”€â”€ SETTINGS â”€â”€ -->
<div class="modal-overlay" id="settings-modal" onclick="if(event.target===this)closeSettings()">
  <div class="modal">
    <div class="modal-handle"></div>
    <div class="modal-title">âš™ï¸ NastavenÃ­</div>
    <div class="setting-group">
      <div class="setting-label">JmÃ©no</div>
      <input class="inp" type="text" id="s-name" placeholder="VaÅ¡e jmÃ©no (volitelnÃ©)">
    </div>
    <div class="setting-group">
      <div class="setting-label">CÃ­l tekutin (ml / den)</div>
      <input class="inp" type="number" id="s-water" placeholder="2000">
    </div>
    <div class="setting-group">
      <div class="setting-label">CÃ­l kaloriÃ­ (kcal / den)</div>
      <input class="inp" type="number" id="s-kcal" placeholder="2500">
    </div>
    <div class="modal-btns">
      <button class="btn-cancel" onclick="closeSettings()">ZruÅ¡it</button>
      <button class="btn-save"   onclick="saveSettings()">UloÅ¾it</button>
    </div>
  </div>
</div>

<!-- â”€â”€ CONFIRM â”€â”€ -->
<div class="confirm-overlay" id="confirm-overlay">
  <div class="confirm-box">
    <div class="confirm-icon">ğŸ—‘ï¸</div>
    <div class="confirm-text">Smazat zÃ¡znam?</div>
    <div class="confirm-sub" id="confirm-sub">Tuto akci nelze vrÃ¡tit.</div>
    <div class="confirm-btns">
      <button class="btn-no"  onclick="confirmNo()">Ne</button>
      <button class="btn-yes" onclick="confirmYes_override()">Ano, smazat</button>
    </div>
  </div>
</div>

<div class="toast-wrap" id="toast-wrap"></div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STORAGE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const SKEY = 'fll_v2';
let cfg  = { name:'', waterGoal:2000, kcalGoal:2500 };
let data = {}; // { "YYYY-MM-DD": [{id,time,icon,name,vol,wgt,kcal,type}] }
let favs = []; // [{id, icon, name, wgt, kcal}]

function todayKey(){ return new Date().toISOString().split('T')[0]; }

function load(){
  try {
    const r = localStorage.getItem(SKEY);
    if(r){ const p=JSON.parse(r); cfg={...cfg,...p.cfg}; data=p.data||{}; favs=p.favs||[]; }
  } catch(e){}
}
function persist(){ localStorage.setItem(SKEY, JSON.stringify({cfg, data, favs})); }

function dayList(key){ return data[key]||[]; }
function todayList(){ return dayList(todayKey()); }
function dayWater(k){ return dayList(k).filter(e=>e.type==='drink').reduce((s,e)=>s+e.vol,0); }
function dayKcal(k) { return dayList(k).reduce((s,e)=>s+(e.kcal||0),0); }

function addEntry(e){
  const k=todayKey();
  if(!data[k]) data[k]=[];
  data[k].unshift(e);
  persist();
}
function delEntry(id){
  const k=todayKey();
  if(!data[k]) return;
  data[k]=data[k].filter(e=>String(e.id)!==String(id));
  persist();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// NAV
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function goTo(scr){
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));
  document.getElementById('screen-'+scr).classList.add('active');
  const nb=document.getElementById('nav-'+scr);
  if(nb) nb.classList.add('active');
  if(scr==='dnes') renderDnes();
  if(scr==='hist') renderHist();
  if(scr==='piti') resetDrink();
  if(scr==='jidlo') { resetFood(); renderFavs(); }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DNES
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// stav sbalenÃ­ sekcÃ­ â€” false = sbaleno (vÃ½chozÃ­)
const tlState = { drinks: false, foods: false };

function toggleSection(key){
  tlState[key] = !tlState[key];
  renderDnes();
}

function toggleFavSection(){
  el('fav-section').classList.toggle('collapsed');
}

function renderDnes(){
  const water=dayWater(todayKey()), kcal=dayKcal(todayKey());
  const wG=cfg.waterGoal, kG=cfg.kcalGoal;
  const h=new Date().getHours();
  const nm=cfg.name?`, ${cfg.name}`:'';
  document.getElementById('greeting').textContent=(h<10?'DobrÃ© rÃ¡no':h<18?'DobrÃ½ den':'DobrÃ½ veÄer')+nm;
  document.getElementById('today-date').textContent=
    new Date().toLocaleDateString('cs-CZ',{weekday:'long',day:'numeric',month:'long'});

  // water
  set('d-water', water);
  set('d-water-goal', wG);
  const wP=Math.min((water/wG)*100,100);
  el('d-water-fill').style.width=wP+'%';
  const wRem=el('d-water-rem');
  if(water>=wG){ wRem.textContent='âœ“ CÃ­l splnÄ›n!'; wRem.className='prog-remain ok'; }
  else { wRem.textContent=`ZbÃ½vÃ¡ ${wG-water} ml`; wRem.className='prog-remain'; }

  // kcal
  set('d-kcal', kcal);
  set('d-kcal-goal', kG);
  const kP=Math.min((kcal/kG)*100,100);
  const kf=el('d-kcal-fill');
  kf.style.width=kP+'%';
  kf.className='fill '+(kP>=100?'danger':kP>=85?'warn':'food');
  const kRem=el('d-kcal-rem');
  if(kcal>=kG){ kRem.textContent='âš  KalorickÃ½ limit dosaÅ¾en'; kRem.className='prog-remain over'; }
  else { kRem.textContent=`ZbÃ½vÃ¡ ${kG-kcal} kcal`; kRem.className='prog-remain food-ok'; }

  // consumption summary
  const totalWgt  = todayList().filter(e=>e.type==='food').reduce((s,e)=>s+(e.wgt||0),0);
  const totalMl   = dayWater(todayKey());
  const totalGram = totalWgt + totalMl; // 1 ml = 1 g
  const parts = [];
  if(totalMl>0)  parts.push(`ğŸ’§ ${totalMl} ml`);
  if(totalWgt>0) parts.push(`ğŸ½ï¸ ${totalWgt} g`);
  const detail = parts.length ? ` (${parts.join(' + ')})` : '';
  el('consump-text').innerHTML = `Celkem zkonzumovÃ¡no: <strong>${totalGram} g</strong>${detail}`;

  // list
  const list=todayList();
  const c=el('today-list');
  if(!list.length){
    c.innerHTML=`<div class="tl-empty"><span class="tl-empty-icon">ğŸ“­</span>Dnes zatÃ­m Å¾Ã¡dnÃ© zÃ¡znamy.<br>PÅ™idej pitÃ­ nebo jÃ­dlo!</div>`;
    return;
  }

  const drinks=list.filter(e=>e.type==='drink');
  const foods =list.filter(e=>e.type==='food');
  let html='';

  if(drinks.length){
    const collapsed = tlState.drinks ? '' : 'collapsed';
    html+=`<div class="tl-section ${collapsed}" id="tl-drinks">
      <div class="tl-section-header" onclick="toggleSection('drinks')">
        <div class="tl-section-left">
          <span class="tl-section-label">ğŸ’§ PitÃ­</span>
          <span class="tl-section-count">${drinks.length}Ã—</span>
        </div>
        <span class="tl-section-arrow">â–¼</span>
      </div>
      <div class="tl-section-body">
        ${drinks.map(e=>tlItem(e)).join('')}
      </div>
    </div>`;
  }
  if(foods.length){
    const collapsed = tlState.foods ? '' : 'collapsed';
    html+=`<div class="tl-section ${collapsed}" id="tl-foods">
      <div class="tl-section-header" onclick="toggleSection('foods')">
        <div class="tl-section-left">
          <span class="tl-section-label">ğŸ½ï¸ JÃ­dlo</span>
          <span class="tl-section-count">${foods.length}Ã—</span>
        </div>
        <span class="tl-section-arrow">â–¼</span>
      </div>
      <div class="tl-section-body">
        ${foods.map(e=>tlItem(e)).join('')}
      </div>
    </div>`;
  }
  c.innerHTML=html;
}

function tlItem(e){
  const detail = e.type==='drink'
    ? `${e.vol} ml${e.kcal>0?' Â· '+e.kcal+' kcal':''}`
    : `${e.wgt} g Â· ${e.kcal} kcal`;
  return `<div class="tl-item" data-id="${e.id}" onclick="openEdit(this)">
    <div class="tl-icon">${e.icon}</div>
    <div class="tl-info">
      <div class="tl-name">${esc(e.name)}</div>
      <div class="tl-detail">${detail}</div>
    </div>
    <div class="tl-time">${e.time}</div>
    <div class="tl-del" onclick="event.stopPropagation();askDel(this.closest('.tl-item'))">ğŸ—‘ï¸</div>
  </div>`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DELETE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let pendingId=null;

function askDel(itemEl){
  const id = itemEl.getAttribute('data-id');
  const name = itemEl.querySelector('.tl-name').textContent;
  pendingId = id;
  el('confirm-sub').textContent=`â€${name}"`;
  el('confirm-overlay').classList.add('show');
}
function confirmYes(){
  if(pendingId){ delEntry(pendingId); pendingId=null; }
  el('confirm-overlay').classList.remove('show');
  renderDnes();
  toast('ZÃ¡znam smazÃ¡n ğŸ—‘ï¸');
}
function confirmNo(){
  pendingId=null;
  el('confirm-overlay').classList.remove('show');
}

// â”€â”€ MAZÃNÃ DNE V HISTORII â”€â”€
let pendingDayKey=null;
function askDelDay(key, label){
  pendingDayKey=key;
  el('confirm-sub').textContent=`CelÃ½ den: ${label}`;
  el('confirm-overlay').classList.add('show');
}
function confirmYes_override(){
  if(pendingFavId){
    favs=favs.filter(f=>f.id!==pendingFavId); pendingFavId=null;
    persist();
    el('confirm-overlay').classList.remove('show');
    renderFavs();
    toast('OblÃ­benÃ© smazÃ¡no ğŸ—‘ï¸');
  } else if(pendingDayKey){
    delete data[pendingDayKey]; pendingDayKey=null;
    persist();
    el('confirm-overlay').classList.remove('show');
    renderHist();
    toast('Den smazÃ¡n ğŸ—‘ï¸');
  } else {
    confirmYes();
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// EDIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let editId=null;

function openEdit(itemEl){
  const id=itemEl.getAttribute('data-id');
  const entry=todayList().find(e=>String(e.id)===String(id));
  if(!entry) return;
  editId=id;
  el('edit-title').textContent = entry.type==='drink' ? 'âœï¸ Upravit pitÃ­' : 'âœï¸ Upravit jÃ­dlo';
  el('edit-name').value  = entry.name;
  el('edit-kcal').value  = entry.kcal||0;
  if(entry.type==='drink'){
    el('edit-vol-group').style.display='block';
    el('edit-wgt-group').style.display='none';
    el('edit-vol').value = entry.vol||0;
  } else {
    el('edit-vol-group').style.display='none';
    el('edit-wgt-group').style.display='block';
    el('edit-wgt').value = entry.wgt||0;
  }
  el('edit-modal').classList.add('show');
}
function closeEdit(){
  editId=null;
  el('edit-modal').classList.remove('show');
}
function saveEdit(){
  const k=todayKey();
  const list=data[k]||[];
  const idx=list.findIndex(e=>String(e.id)===String(editId));
  if(idx<0){ closeEdit(); return; }
  const entry=list[idx];
  entry.name = el('edit-name').value.trim() || entry.name;
  entry.kcal = parseInt(el('edit-kcal').value)||0;
  if(entry.type==='drink') entry.vol = parseInt(el('edit-vol').value)||entry.vol;
  else                     entry.wgt = parseInt(el('edit-wgt').value)||entry.wgt;
  persist();
  closeEdit();
  renderDnes();
  toast('ZÃ¡znam upraven âœ“');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PITÃ STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let dVol=null, dTyp=null;

function resetDrink(){
  dVol=null; dTyp=null;
  el('vol-grid').querySelectorAll('.grid-btn').forEach(b=>b.classList.remove('sel-vol'));
  el('typ-grid').querySelectorAll('.grid-btn').forEach(b=>b.classList.remove('sel-typ'));
  el('d-vol-wrap').style.display='none';
  el('d-typ-wrap').style.display='none';
  el('drink-custom').classList.remove('show');
  el('d-inp-vol').value='';
  el('d-inp-name').value='';
  el('d-inp-k100').value='';
  el('drink-preview').classList.add('hidden');
  el('drink-add-btn').disabled=true;
}

function selVol(btn,val){
  el('vol-grid').querySelectorAll('.grid-btn').forEach(b=>b.classList.remove('sel-vol'));
  btn.classList.add('sel-vol');
  dVol=val;
  el('d-vol-wrap').style.display=(val==='custom')?'block':'none';
  syncPanel('drink-custom','d-vol-wrap','d-typ-wrap');
  updDrinkPreview();
}

function selTyp(btn){
  el('typ-grid').querySelectorAll('.grid-btn').forEach(b=>b.classList.remove('sel-typ'));
  btn.classList.add('sel-typ');
  const isC=btn.dataset.n==='__custom';
  dTyp = isC ? {name:'',k100:0,icon:'ğŸ¥¤',custom:true}
             : {name:btn.dataset.n, k100:parseFloat(btn.dataset.k), icon:btn.dataset.i};
  el('d-typ-wrap').style.display=isC?'block':'none';
  syncPanel('drink-custom','d-vol-wrap','d-typ-wrap');
  updDrinkPreview();
}

function syncPanel(panelId, w1, w2){
  const show = el(w1).style.display!=='none' || el(w2).style.display!=='none';
  el(panelId).classList.toggle('show', show);
}

function resolveDVol(){
  if(!dVol) return null;
  if(dVol==='custom'){ const v=parseInt(el('d-inp-vol').value); return v>0?v:null; }
  return dVol;
}
function resolveDTyp(){
  if(!dTyp) return null;
  if(dTyp.custom){
    const n=el('d-inp-name').value.trim();
    return n?{name:n, k100:parseFloat(el('d-inp-k100').value)||0, icon:'ğŸ¥¤'}:null;
  }
  return dTyp;
}

function updDrinkPreview(){
  const vol=resolveDVol(), typ=resolveDTyp();
  const box=el('drink-preview'), btn=el('drink-add-btn');
  if(!vol||!typ){ box.classList.add('hidden'); btn.disabled=true; return; }
  const kcal=Math.round((typ.k100/100)*vol);
  box.classList.remove('hidden');
  el('dp-main').textContent=`${typ.icon} ${typ.name} â€“ ${vol} ml`;
  el('dp-detail').textContent=typ.k100>0?`${typ.k100} kcal / 100 ml`:'bez kaloriÃ­';
  el('dp-kcal').innerHTML=`${kcal} <span>kcal</span>`;
  btn.disabled=false;
}

function addDrink(){
  const vol=resolveDVol(), typ=resolveDTyp();
  if(!vol||!typ) return;
  const kcal=Math.round((typ.k100/100)*vol);
  addEntry({ id:uid(), time:now(), icon:typ.icon, name:typ.name, vol, kcal, type:'drink' });
  toast(`${typ.icon} ${typ.name} ${vol} ml pÅ™idÃ¡no`);
  goTo('dnes');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// JÃDLO STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let fWgt=null, fTyp=null;

function resetFood(){
  fWgt=null; fTyp=null;
  el('wgt-grid').querySelectorAll('.grid-btn').forEach(b=>b.classList.remove('sel-wgt'));
  el('ftyp-grid').querySelectorAll('.grid-btn').forEach(b=>b.classList.remove('sel-ftyp'));
  el('f-wgt-wrap').style.display='none';
  el('f-ftyp-wrap').style.display='none';
  el('food-custom').classList.remove('show');
  el('f-inp-name').value='';
  el('f-inp-wgt').value='';
  el('f-inp-k100').value='';
  el('food-preview').classList.add('hidden');
  el('food-add-btn').disabled=true;
  el('btn-save-fav').disabled=true;
  el('calc-per100').value='';
  el('calc-weight').value='';
  el('calc-result').innerHTML='â€“ <span>kcal</span>';
  el('calc-use-btn').disabled=true;
}

function selWgt(btn,val){
  el('wgt-grid').querySelectorAll('.grid-btn').forEach(b=>b.classList.remove('sel-wgt'));
  btn.classList.add('sel-wgt');
  fWgt=val;
  el('f-wgt-wrap').style.display=(val==='custom')?'block':'none';
  syncPanel('food-custom','f-wgt-wrap','f-ftyp-wrap');
  updFoodPreview();
}

function selFtyp(btn){
  el('ftyp-grid').querySelectorAll('.grid-btn').forEach(b=>b.classList.remove('sel-ftyp'));
  btn.classList.add('sel-ftyp');
  const isC=btn.dataset.k==='custom';
  fTyp = isC ? {kcal:0,icon:'âœï¸',custom:true}
             : {kcal:parseFloat(btn.dataset.k), icon:btn.dataset.i};
  el('f-ftyp-wrap').style.display=isC?'block':'none';
  syncPanel('food-custom','f-wgt-wrap','f-ftyp-wrap');
  updFoodPreview();
}

function resolveFWgt(){
  if(!fWgt) return null;
  if(fWgt==='custom'){ const v=parseInt(el('f-inp-wgt').value); return v>0?v:null; }
  return fWgt;
}
function resolveFTyp(){
  if(!fTyp) return null;
  if(fTyp.custom){ return {kcal:parseFloat(el('f-inp-k100').value)||0, icon:'ğŸ½ï¸'}; }
  return fTyp;
}

function updFoodPreview(){
  const name=el('f-inp-name').value.trim();
  const wgt=resolveFWgt(), typ=resolveFTyp();
  const box=el('food-preview'), btn=el('food-add-btn');
  const favBtn=el('btn-save-fav');
  if(!name||!wgt||!typ){ box.classList.add('hidden'); btn.disabled=true; favBtn.disabled=true; return; }
  const kcal = typ.kcal;
  box.classList.remove('hidden');
  el('fp-main').textContent=`${typ.icon} ${name} â€“ ${wgt} g`;
  el('fp-detail').textContent=`${kcal} kcal celkem`;
  el('fp-kcal').innerHTML=`${kcal} <span>kcal</span>`;
  btn.disabled=false;
  favBtn.disabled=false;
}

function addFood(){
  const name=el('f-inp-name').value.trim();
  const wgt=resolveFWgt(), typ=resolveFTyp();
  if(!name||!wgt||!typ) return;
  addEntry({ id:uid(), time:now(), icon:typ.icon, name, wgt, kcal:typ.kcal, type:'food' });
  toast(`${typ.icon} ${name} ${wgt} g pÅ™idÃ¡no`);
  goTo('dnes');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// OBLÃBENÃ JÃDLA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderFavs(){
  const c=el('fav-scroll');
  if(!favs.length){
    c.innerHTML=`<div class="fav-empty">ZatÃ­m Å¾Ã¡dnÃ¡ oblÃ­benÃ¡. UloÅ¾ jÃ­dlo hvÄ›zdiÄkou â†“</div>`;
    return;
  }
  c.innerHTML=favs.map(f=>`
    <div class="fav-card">
      <div class="fav-card-icon" onclick="addFav('${f.id}')">${f.icon}</div>
      <div class="fav-card-name" onclick="addFav('${f.id}')">${esc(f.name)}</div>
      <div class="fav-card-detail">${f.wgt}g Â· ${f.kcal} kcal</div>
      <div class="fav-card-actions">
        <button class="fav-act-btn" onclick="openEditFav('${f.id}')">âœï¸</button>
        <button class="fav-act-btn" onclick="askDelFav('${f.id}','${esc(f.name)}')">ğŸ—‘ï¸</button>
      </div>
    </div>
  `).join('');
}

function addFav(id){
  const f=favs.find(x=>x.id===id);
  if(!f) return;
  addEntry({ id:uid(), time:now(), icon:f.icon, name:f.name, wgt:f.wgt, kcal:f.kcal, type:'food' });
  toast(`${f.icon} ${f.name} pÅ™idÃ¡no`);
  goTo('dnes');
}

// â”€â”€ ULOÅ½ENÃ OBLÃBENÃ‰HO â”€â”€
let sfIcon = 'ğŸ½ï¸';

function openSaveFav(){
  const name=el('f-inp-name').value.trim();
  el('sf-name').value=name;
  sfIcon='ğŸ½ï¸';
  el('sf-icon-grid').querySelectorAll('.icon-pick-btn').forEach(b=>b.classList.remove('picked'));
  el('savefav-modal').classList.add('show');
}
function closeSaveFav(){ el('savefav-modal').classList.remove('show'); }

function pickIcon(btn, icon){
  el('sf-icon-grid').querySelectorAll('.icon-pick-btn').forEach(b=>b.classList.remove('picked'));
  btn.classList.add('picked');
  sfIcon=icon;
}

function confirmSaveFav(){
  const name=el('sf-name').value.trim();
  if(!name){ toast('Zadej nÃ¡zev â—'); return; }
  const wgt=resolveFWgt(), typ=resolveFTyp();
  if(!wgt||!typ){ closeSaveFav(); return; }
  favs.push({ id:uid(), icon:sfIcon, name, wgt, kcal:typ.kcal });
  persist();
  closeSaveFav();
  renderFavs();
  toast(`${sfIcon} ${name} uloÅ¾eno do oblÃ­benÃ½ch â­`);
}

// â”€â”€ EDITACE OBLÃBENÃ‰HO â”€â”€
let editFavId=null, efIcon='ğŸ½ï¸';

function openEditFav(id){
  const f=favs.find(x=>x.id===id);
  if(!f) return;
  editFavId=id; efIcon=f.icon;
  el('ef-name').value=f.name;
  el('ef-wgt').value=f.wgt;
  el('ef-kcal').value=f.kcal;
  el('ef-icon-grid').querySelectorAll('.icon-pick-btn').forEach(b=>{
    b.classList.toggle('picked', b.textContent===f.icon);
  });
  el('editfav-modal').classList.add('show');
}
function closeEditFav(){ editFavId=null; el('editfav-modal').classList.remove('show'); }

function pickIconEf(btn, icon){
  el('ef-icon-grid').querySelectorAll('.icon-pick-btn').forEach(b=>b.classList.remove('picked'));
  btn.classList.add('picked');
  efIcon=icon;
}

function confirmEditFav(){
  const idx=favs.findIndex(x=>x.id===editFavId);
  if(idx<0){ closeEditFav(); return; }
  favs[idx].name = el('ef-name').value.trim() || favs[idx].name;
  favs[idx].wgt  = parseInt(el('ef-wgt').value)||favs[idx].wgt;
  favs[idx].kcal = parseInt(el('ef-kcal').value)||favs[idx].kcal;
  favs[idx].icon = efIcon;
  persist();
  closeEditFav();
  renderFavs();
  toast('OblÃ­benÃ© upraveno âœ“');
}

// â”€â”€ MAZÃNÃ OBLÃBENÃ‰HO â”€â”€
let pendingFavId=null;

function askDelFav(id, name){
  pendingFavId=id;
  el('confirm-sub').textContent=`OblÃ­benÃ©: â€${name}"`;
  el('confirm-overlay').classList.add('show');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// KCAL KALKULAÄŒKA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function updCalc(){
  const per100=parseFloat(el('calc-per100').value);
  const wgt=parseFloat(el('calc-weight').value);
  const resEl=el('calc-result');
  const useBtn=el('calc-use-btn');
  if(per100>0 && wgt>0){
    const kcal=Math.round((per100/100)*wgt);
    resEl.innerHTML=`${kcal} <span>kcal</span>`;
    useBtn.disabled=false;
  } else {
    resEl.innerHTML=`â€“ <span>kcal</span>`;
    useBtn.disabled=true;
  }
}

function useCalcResult(){
  const per100=parseFloat(el('calc-per100').value);
  const wgt=parseFloat(el('calc-weight').value);
  if(!per100||!wgt) return;
  const kcal=Math.round((per100/100)*wgt);
  // vyplÅˆ vÃ¡hu do custom inputu
  el('f-inp-wgt').value=wgt;
  el('f-inp-k100').value=kcal;
  // aktivuj custom vÃ¡hu a custom kcal
  const wgtBtns=el('wgt-grid').querySelectorAll('.grid-btn');
  wgtBtns.forEach(b=>b.classList.remove('sel-wgt'));
  const customWgtBtn=Array.from(wgtBtns).find(b=>b.getAttribute('onclick')&&b.getAttribute('onclick').includes("'custom'"));
  if(customWgtBtn){ customWgtBtn.classList.add('sel-wgt'); fWgt='custom'; }
  el('f-wgt-wrap').style.display='block';
  const ftypBtns=el('ftyp-grid').querySelectorAll('.grid-btn');
  ftypBtns.forEach(b=>b.classList.remove('sel-ftyp'));
  const customFtypBtn=Array.from(ftypBtns).find(b=>b.dataset.k==='custom');
  if(customFtypBtn){ customFtypBtn.classList.add('sel-ftyp'); fTyp={kcal,icon:'ğŸ½ï¸',custom:true}; }
  el('f-ftyp-wrap').style.display='block';
  syncPanel('food-custom','f-wgt-wrap','f-ftyp-wrap');
  updFoodPreview();
  toast(`VypoÄteno: ${kcal} kcal pro ${wgt} g âœ“`);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderHist(){
  const today=todayKey();
  // collect past days with data (excluding today)
  const keys=Object.keys(data)
    .filter(k=>k<today && data[k].length>0)
    .sort((a,b)=>b.localeCompare(a));

  const c=el('hist-list');
  if(!keys.length){
    c.innerHTML=`<div class="hist-empty">ğŸ“­ Å½Ã¡dnÃ¡ minulÃ¡ data</div>`;
    return;
  }

  c.innerHTML=keys.map(k=>{
    const d=new Date(k+'T12:00:00');
    const label=d.toLocaleDateString('cs-CZ',{weekday:'long',day:'numeric',month:'long'});
    const w=dayWater(k), kc=dayKcal(k);
    return `<div class="hist-day-card">
      <div class="hdc-header">
        <div class="hdc-date">${label}</div>
        <div class="hdc-del-btn" onclick="askDelDay('${k}','${label}')">ğŸ—‘ï¸</div>
      </div>
      <div class="hdc-row">
        <div class="hdc-pill">
          <div class="hdc-val wc">${w} ml</div>
          <div class="hdc-lbl">ğŸ’§ Tekutiny</div>
        </div>
        <div class="hdc-pill">
          <div class="hdc-val fc">${kc} kcal</div>
          <div class="hdc-lbl">ğŸ”¥ Kalorie</div>
        </div>
      </div>
    </div>`;
  }).join('');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// NASTAVENÃ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function openSettings(){
  el('s-name').value =cfg.name||'';
  el('s-water').value=cfg.waterGoal;
  el('s-kcal').value =cfg.kcalGoal;
  el('settings-modal').classList.add('show');
}
function closeSettings(){ el('settings-modal').classList.remove('show'); }
function saveSettings(){
  cfg.name     =el('s-name').value.trim();
  cfg.waterGoal=parseInt(el('s-water').value)||2000;
  cfg.kcalGoal =parseInt(el('s-kcal').value)||2500;
  persist(); closeSettings(); renderDnes();
  toast('NastavenÃ­ uloÅ¾eno âœ“');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TOAST
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function toast(msg){
  const w=el('toast-wrap');
  const t=document.createElement('div');
  t.className='toast'; t.textContent=msg; w.appendChild(t);
  setTimeout(()=>{ t.classList.add('out'); setTimeout(()=>t.remove(),300); },2500);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// UTILS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function el(id){ return document.getElementById(id); }
function set(id,v){ el(id).textContent=v; }
function uid(){ return Date.now()+'-'+Math.random().toString(36).slice(2); }
function now(){ return new Date().toTimeString().slice(0,5); }
function esc(s){ return s.replace(/[&<>"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
load();
renderDnes();
</script>
</body>
</html>
